<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script type="text/javascript">

        /******************* 概述 *********************/

        // 结合“函数是对象”的特性，做一个对数组 sort 排序的例子

        /******************* 示例 *********************/

        // 1、一个简单数组排序
        (function () {

            var arr = [111, 1, 2, 333, 4, 5];
            // 按照的字符序列排序 1 111 2 333 4 5
            // arr.sort();

            // 按照的数值大小排序 1 111 2 333 4 5
            arr.sort(function (a, b) {
                if (a > b) {
                    return 1;
                } else if (a == b) {
                    return 0;
                } else {
                    return -1;
                }
            });

            console.log(arr); // 1 2 4 5 111 333

        })();


        // 2、对对象进行排序
        (function () {
            function Person(name, age) {
                this.name = name;
                this.age = age;
            }

            var p2 = new Person('Aaa', 20);
            var p1 = new Person('Bbb', 10);
            var p3 = new Person('Ccc', 30);

            var ps = [p1, p2, p3];

            // 1、没有为对象排序指定规则，故原样输出
            // ps.sort();

            // 2、根据 name 排序
//            ps.sort(function (p1, p2) {
//                if (p1.name > p2.name) {
//                    return 1;
//                } else if (p1.name == p2.name){
//                    return 0;
//                } else {
//                    return -1;
//                }
//            });

            // 3、根据 age 排序
            ps.sort(function (p1, p2) {
                if (p1.age > p2.age){
                    return 1;
                } else if (p1.age == p2.age){
                    return 0;
                } else {
                    return -1;
                }
            });

//            console.log(ps);

            // 4、如果属性太多，针对每个属性的排序都得写一个排序函数
        })();


        // 2、优化：对对象进行排序
        (function () {
            function Person(name, age) {
                this.name = name;
                this.age = age;
            }

            var p2 = new Person('Aaa', 20);
            var p1 = new Person('Bbb', 10);
            var p3 = new Person('Ccc', 30);

            var ps = [p1, p2, p3];

            function sortFuncFactory(propertyName) {
                return function (p1, p2) {
                    if (p1[propertyName] > p2[propertyName]){
                        return 1;
                    } else if (p1[propertyName] == p2[propertyName]){
                        return 0;
                    } else {
                        return -1;
                    }
                }
            }

            var sortByProperty = sortFuncFactory('age');
            ps.sort(sortByProperty);

            console.log(ps);

        })();

        /******************* 结论 *********************/


    </script>
</head>
<body>

</body>
</html>